<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>Password Generator</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f4f4f4;
      color: #333;
      text-align: center;
      padding: 40px;
      margin: 0;
      transition: background 0.3s, color 0.3s;
    }
    body.dark { background: #1c1c1c; color: #eee; }
    h1 { margin-bottom: 20px; font-size: 28px; }
    #password { font-size: 22px; font-weight: bold; margin: 20px 0; color: #0077cc; word-wrap: break-word; }
    #strength { font-size: 18px; margin-bottom: 15px; font-weight: bold; }
    .weak { color: red; }
    .medium { color: orange; }
    .strong { color: green; }
    .controls { margin-bottom: 20px; }
    label { margin: 0 10px; font-size: 16px; }
    input[type="number"], input[type="text"] { padding: 8px; font-size: 16px; border: 1px solid #ccc; border-radius: 5px; }
    input[type="number"] { width: 60px; }
    input[type="checkbox"] { transform: scale(1.2); }
    button { background-color: #0077cc; color: white; padding: 10px 16px; font-size: 16px; border: none; border-radius: 5px; cursor: pointer; margin: 5px; transition: background 0.2s; }
    button:hover { background-color: #005fa3; }
    .theme-toggle, .lang-toggle { position: absolute; top: 10px; background: none; border: none; font-size: 20px; cursor: pointer; }
    .theme-toggle { right: 20px; }
    .lang-toggle { left: 20px; }
    .custom-input { margin-top: 20px; }
    #userStrength { margin-top: 8px; font-weight: bold; }
    @media (max-width: 600px) {
      body { padding: 20px; }
      h1 { font-size: 22px; }
      button { font-size: 15px; padding: 10px; }
      label { display: block; margin: 10px 0; }
    }
  </style>
</head>
<body>
  <button class="theme-toggle" onclick="toggleTheme()">üåô</button>
  <button class="lang-toggle" onclick="toggleLanguage()">üá∑üá∫</button>

  <h1 id="title">üîê –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –ø–∞—Ä–æ–ª–µ–π</h1>

  <div class="controls">
    <label><span data-text="length">–î–ª–∏–Ω–∞</span>:
      <input type="number" id="length" min="4" max="32" value="12">
    </label>
    <label>
      <input type="checkbox" id="letters" checked>
      <span data-text="letters">–ë—É–∫–≤—ã</span>
    </label>
    <label>
      <input type="checkbox" id="numbers" checked>
      <span data-text="numbers">–¶–∏—Ñ—Ä—ã</span>
    </label>
    <label>
      <input type="checkbox" id="symbols" checked>
      <span data-text="symbols">–°–∏–º–≤–æ–ª—ã</span>
    </label>
  </div>

  <div id="password">–ù–∞–∂–º–∏—Ç–µ "–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å"</div>
  <div id="strength"></div>

  <button onclick="generatePassword()" data-text="generate">–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–∞—Ä–æ–ª—å</button>
  <button onclick="generatePhrase()" data-text="phrase">–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Ñ—Ä–∞–∑—É</button>
  <button onclick="copyPassword()" data-text="copy">–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button>

  <div class="custom-input">
    <p id="customPrompt">üîé –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–≤–æ–π –ø–∞—Ä–æ–ª—å:</p>
    <input type="text" id="customPassword" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å–≤–æ–π –ø–∞—Ä–æ–ª—å">
    <button onclick="onUserCheck()" id="userCheckBtn">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–∞—Ä–æ–ª—å</button>
    <div id="userStrength"></div>
  </div>

  <script>
    // English word list for phrase passwords
    const words = [
      "forest", "dog", "house", "river", "mountain", "snow", "day", "cat", "moon", "bridge",
      "brother", "world", "bug", "rain", "tea", "path", "pond", "shadow", "chair", "eye"
    ];

    const translations = {
      ru: {
        title: "üîê –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –ø–∞—Ä–æ–ª–µ–π",
        length: "–î–ª–∏–Ω–∞",
        letters: "–ë—É–∫–≤—ã",
        numbers: "–¶–∏—Ñ—Ä—ã",
        symbols: "–°–∏–º–≤–æ–ª—ã",
        generate: "–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–∞—Ä–æ–ª—å",
        phrase: "–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Ñ—Ä–∞–∑—É",
        copy: "–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å",
        strengthWeak: "–ù–∞–¥—ë–∂–Ω–æ—Å—Ç—å: –°–õ–ê–ë–´–ô",
        strengthMed: "–ù–∞–¥—ë–∂–Ω–æ—Å—Ç—å: –°–†–ï–î–ù–ò–ô",
        strengthStrong: "–ù–∞–¥—ë–∂–Ω–æ—Å—Ç—å: –°–ò–õ–¨–ù–´–ô",
        customPrompt: "üîé –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–≤–æ–π –ø–∞—Ä–æ–ª—å:",
        copied: "–ü–∞—Ä–æ–ª—å —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω!",
        generateFirst: "–°–Ω–∞—á–∞–ª–∞ —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ –ø–∞—Ä–æ–ª—å!",
        userCheck: "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–∞—Ä–æ–ª—å"
      },
      en: {
        title: "üîê Password Generator",
        length: "Length",
        letters: "Letters",
        numbers: "Numbers",
        symbols: "Symbols",
        generate: "Generate Password",
        phrase: "Generate Phrase",
        copy: "Copy",
        strengthWeak: "Strength: WEAK",
        strengthMed: "Strength: MEDIUM",
        strengthStrong: "Strength: STRONG",
        customPrompt: "üîé Check your password:",
        copied: "Password copied!",
        generateFirst: "Please generate a password first!",
        userCheck: "Check password"
      }
    };

    let currentLang = "ru";

    function toggleLanguage() {
      currentLang = currentLang === "ru" ? "en" : "ru";
      const t = translations[currentLang];

      document.getElementById("title").innerText = t.title;
      document.querySelector('[data-text="length"]').innerText = t.length;
      document.querySelector('[data-text="letters"]').innerText = t.letters;
      document.querySelector('[data-text="numbers"]').innerText = t.numbers;
      document.querySelector('[data-text="symbols"]').innerText = t.symbols;
      document.querySelector('[data-text="generate"]').innerText = t.generate;
      document.querySelector('[data-text="phrase"]').innerText = t.phrase;
      document.querySelector('[data-text="copy"]').innerText = t.copy;
      document.getElementById("customPrompt").innerText = t.customPrompt;
      document.getElementById("userCheckBtn").innerText = t.userCheck;
      document.querySelector(".lang-toggle").innerText = currentLang === "ru" ? "üá∑üá∫" : "üá∫üá∏";
      checkStrength(document.getElementById("password").innerText);
    }

    // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –Ω–∞–¥—ë–∂–Ω–æ–≥–æ –ø–∞—Ä–æ–ª—è —Å —É—á—ë—Ç–æ–º –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö —Ç–∏–ø–æ–≤ —Å–∏–º–≤–æ–ª–æ–≤
    function generatePassword() {
      const length = Math.max(4, parseInt(document.getElementById("length").value) || 12);
      const useLetters = document.getElementById("letters").checked;
      const useNumbers = document.getElementById("numbers").checked;
      const useSymbols = document.getElementById("symbols").checked;

      let chars = "";
      let availableTypes = [];
      if (useLetters) {
        chars += "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";
        availableTypes.push("letter");
      }
      if (useNumbers) {
        chars += "0123456789";
        availableTypes.push("number");
      }
      if (useSymbols) {
        chars += "!@#$%^&*()_+-=[]{}|;:,.<>?";
        availableTypes.push("symbol");
      }

      if (chars === "") {
        alert("–í—ã–±–µ—Ä–∏—Ç–µ —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω —Ç–∏–ø —Å–∏–º–≤–æ–ª–æ–≤!");
        return;
      }

      let password = "";

      // –î–æ–±–∞–≤–∏–º –ø–æ –æ–¥–Ω–æ–º—É —Å–∏–º–≤–æ–ª—É –∫–∞–∂–¥–æ–≥–æ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —Ç–∏–ø–∞ (–≥–∞—Ä–∞–Ω—Ç–∏—è)
      let forced = "";
      if (useLetters) forced += "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(Math.random() * 52));
      if (useNumbers) forced += "0123456789".charAt(Math.floor(Math.random() * 10));
      if (useSymbols) forced += "!@#$%^&*()_+-=[]{}|;:,.<>?".charAt(Math.floor(Math.random() * 24));

      for (let i = 0; i < length - forced.length; i++) {
        password += chars.charAt(Math.floor(Math.random() * chars.length));
      }

      password += forced;
      // –ü–µ—Ä–µ–º–µ—à–∏–≤–∞–µ–º —Å–∏–º–≤–æ–ª—ã
      password = password.split('').sort(() => Math.random() - 0.5).join('');

      document.getElementById("password").innerText = password;
      checkStrength(password);
    }

    // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ñ—Ä–∞–∑—ã-–ø–∞—Ä–æ–ª—è –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º —è–∑—ã–∫–µ
    function generatePhrase() {
      let phrase = "";
      for (let i = 0; i < 4; i++) {
        const word = words[Math.floor(Math.random() * words.length)];
        phrase += word.charAt(0).toUpperCase() + word.slice(1);
        if (i < 3) phrase += "-";
      }
      const number = Math.floor(Math.random() * 100);
      const symbol = "!@#$%&*"[Math.floor(Math.random() * 8)];
      phrase += "-" + number + symbol;

      document.getElementById("password").innerText = phrase;
      checkStrength(phrase);
    }

    function copyPassword() {
      const password = document.getElementById("password").innerText;
      if (!password || password.includes("–ù–∞–∂–º–∏—Ç–µ") || password.includes("Click")) {
        alert(translations[currentLang].generateFirst);
        return;
      }
      navigator.clipboard.writeText(password);
      alert(translations[currentLang].copied);
    }

    function toggleTheme() {
      const body = document.body;
      body.classList.toggle('dark');
      const btn = document.querySelector('.theme-toggle');
      btn.innerText = body.classList.contains('dark') ? 'üåû' : 'üåô';
    }

    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç–∏ –¥–ª—è —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ø–∞—Ä–æ–ª—è
    function checkStrength(password) {
      const strength = document.getElementById("strength");
      let score = 0;

      if (password.length >= 12) score++;
      if (/[A-Z]/.test(password) && /[a-z]/.test(password)) score++;
      if (/\d/.test(password)) score++;
      if (/[^A-Za-z0-9]/.test(password)) score++;

      if (score <= 1) {
        strength.innerText = translations[currentLang].strengthWeak;
        strength.className = "weak";
      } else if (score === 2 || score === 3) {
        strength.innerText = translations[currentLang].strengthMed;
        strength.className = "medium";
      } else {
        strength.innerText = translations[currentLang].strengthStrong;
        strength.className = "strong";
      }
    }

    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –ø–∞—Ä–æ–ª—è –ø–æ—Å–ª–µ –Ω–∞–∂–∞—Ç–∏—è –∫–Ω–æ–ø–∫–∏
    function checkStrengthUser(password) {
      const strength = document.getElementById("userStrength");
      let score = 0;

      if (password.length >= 12) score++;
      if (/[A-Z]/.test(password) && /[a-z]/.test(password)) score++;
      if (/\d/.test(password)) score++;
      if (/[^A-Za-z0-9]/.test(password)) score++;

      if (!password) {
        strength.innerText = "";
        strength.className = "";
        return;
      }

      if (score <= 1) {
        strength.innerText = translations[currentLang].strengthWeak;
        strength.className = "weak";
      } else if (score === 2 || score === 3) {
        strength.innerText = translations[currentLang].strengthMed;
        strength.className = "medium";
      } else {
        strength.innerText = translations[currentLang].strengthStrong;
        strength.className = "strong";
      }
    }

    function onUserCheck() {
      const password = document.getElementById("customPassword").value;
      checkStrengthUser(password);
    }
  </script>
</body>
</html>
